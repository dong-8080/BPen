package com.example.bibipentest.virtual;

import android.util.Log;
import android.util.Pair;
import android.view.View;

import com.example.bibipentest.MyApp;
import com.example.bibipentest.R;
import com.example.bibipentest.media.AudioPlayerManager;
import com.example.bibipentest.view.DrawingView;

import java.util.Random;

// 响应事件按钮，对应”查答案“
public class VirtualButtonResponse extends VirtualButton {

    private AudioPlayerManager player;

    public VirtualButtonResponse(VirtualPoint centerPoint) {
        super(centerPoint.getId(), centerPoint.getX(), centerPoint.getY());
    }

    @Override
    public void triggerClick() {
        Log.e(TAG, "Response Button "+id+" is Clicked!");
//        HttpUtils.post("url", "", new Callback() {
//            @Override
//            public void onFailure(@NonNull Call call, @NonNull IOException e) {
//                // 失败逻辑
//            }
//
//            @Override
//            public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {
//                if(response.isSuccessful()){
//                    final String responseData = response.body().string();
//                    // 处理响应数据，可以更新主线程的UI
//                }
//            }
//        });
        int min = 1;
        int max = 4;
        Random random = new Random();
        int random_state = random.nextInt(max - min + 1) + min;
        player = AudioPlayerManager.getInstance(MyApp.getInstance());
        switch (random_state) {
            case 1:
                player.playAudio(R.raw.correct_answer);
                break;
            case 2:
                player.playAudio(R.raw.not_judged);
                break;
            case 3:
                player.playAudio(R.raw.not_submtted);
                break;
            case 4:
                player.playAudio(R.raw.wrong_answer);
                break;

        }




    }

    private static String TAG = "EventTriggerReceiver";

    @Override
    public void testMethod(View view) {
        DrawingView drawingView = (DrawingView) view;
        drawingView.notifyTextChanged("点击响应按钮"+id+"!");
    }
}
